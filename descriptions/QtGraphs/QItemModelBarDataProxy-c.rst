.. sip:class-description::
    :status: todo
    :brief: Proxy class for presenting data in item models with Q3DBarsWidgetItem
    :digest: c020d02f8c16575fad8af23605018944

Proxy class for presenting data in item models with :sip:ref:`~PyQt6.QtGraphsWidgets.Q3DBarsWidgetItem`.

:sip:ref:`~PyQt6.QtGraphs.QItemModelBarDataProxy` allows you to use :sip:ref:`~PyQt6.QtCore.QAbstractItemModel` derived models as a data source for :sip:ref:`~PyQt6.QtGraphsWidgets.Q3DBarsWidgetItem`. It uses the defined mappings to map data from the model to rows, columns, and values of :sip:ref:`~PyQt6.QtGraphsWidgets.Q3DBarsWidgetItem` graph.

The data is resolved asynchronously whenever mappings or the model changes. :sip:ref:`~PyQt6.QtGraphs.QBarDataProxy.arrayReset` is emitted when the data has been resolved. However, when :sip:ref:`~PyQt6.QtGraphs.QItemModelBarDataProxy.useModelCategories` property is set to true, single item changes are resolved synchronously, unless the same frame also contains a change that causes the whole model to be resolved.

Mappings can be used in the following ways:

* If :sip:ref:`~PyQt6.QtGraphs.QItemModelBarDataProxy.useModelCategories` property is set to true, this proxy will map rows and columns of :sip:ref:`~PyQt6.QtCore.QAbstractItemModel` directly to rows and columns of :sip:ref:`~PyQt6.QtGraphsWidgets.Q3DBarsWidgetItem`, and uses the value returned for :sip:ref:`~PyQt6.QtCore.Qt.ItemDataRole.DisplayRole` as bar value by default. The value role to be used can be redefined if :sip:ref:`~PyQt6.QtCore.Qt.ItemDataRole.DisplayRole` is not suitable.

* For models that do not have data already neatly sorted into rows and columns, such as :sip:ref:`~PyQt6.QtCore.QAbstractListModel` based models, you can define a role from the model to map for each of the row, column and value.

* If you do not want to include all data contained in the model, or the autogenerated rows and columns are not ordered as you wish, you can specify which rows and columns should be included and in which order by defining an explicit list of categories for either or both of rows and columns.

For example, assume that you have a custom :sip:ref:`~PyQt6.QtCore.QAbstractItemModel` for storing various monthly values related to a business. Each item in the model has the roles "year", "month", "income", and "expenses". You could do the following to display the data in a bar graph:

.. literalinclude:: ../../../snippets/qtgraphs-src-doc-snippets-doc_src_qtgraphs.py
    :lines: 15-41

If the fields of the model do not contain the data in the exact format you need, you can specify a search pattern regular expression and a replace rule for each role to get the value in a format you need. For more information on how the replacement using regular expressions works, see QString::replace(const :sip:ref:`~PyQt6.QtCore.QRegularExpression` &rx, const QString &after) function documentation. Note that using regular expressions has an impact on the performance, so it's more efficient to utilize item models where doing search and replace is not necessary to get the desired values.

For example about using the search patterns in conjunction with the roles, see `Simple Bar Graph <https://doc.qt.io/qt-6/qtgraphs-3d-bars-example.html>`_.

.. seealso:: `Qt Graphs Data Handling with 3D <https://doc.qt.io/qt-6/qtgraphs-data-handling.html>`_.
