.. sip:method-description::
    :status: todo
    :pysig: 341be97d9aff90c9978347f66f945b77
    :realsig: (const QString&)
    :digest: d11048717164078ed6c507313a0a3681

Changes the output of the default message handler.

Allows to tweak the output of :sip:ref:`~PyQt6.QtCore.qDebug`, :sip:ref:`~PyQt6.QtCore.qInfo`, :sip:ref:`~PyQt6.QtCore.qWarning`, :sip:ref:`~PyQt6.QtCore.qCritical`, and :sip:ref:`~PyQt6.QtCore.qFatal`. The category logging output of qCDebug(), qCInfo(), qCWarning(), and qCCritical() is formatted, too.

Following placeholders are supported:

+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Placeholder                                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
+==============================================+===============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
| ``%{appname}``                               | :sip:ref:`~PyQt6.QtCore.QCoreApplication.applicationName`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{category}``                              | Logging category                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{file}``                                  | Path to source file                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{function}``                              | Function                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{line}``                                  | Line in source file                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{message}``                               | The actual message                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{pid}``                                   | :sip:ref:`~PyQt6.QtCore.QCoreApplication.applicationPid`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{threadid}``                              | The system-wide ID of current thread (if it can be obtained)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{qthreadptr}``                            | A pointer to the current :sip:ref:`~PyQt6.QtCore.QThread` (result of :sip:ref:`~PyQt6.QtCore.QThread.currentThread`)                                                                                                                                                                                                                                                                                                                                                                                                                          |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{type}``                                  | "debug", "warning", "critical" or "fatal"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{time process}``                          | time of the message, in seconds since the process started (the token "process" is literal)                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{time boot}``                             | the time of the message, in seconds since the system boot if that can be determined (the token "boot" is literal). If the time since boot could not be obtained, the output is indeterminate (see :sip:ref:`~PyQt6.QtCore.QElapsedTimer.msecsSinceReference`).                                                                                                                                                                                                                                                                                |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{time [format]}``                         | system time when the message occurred, formatted by passing the ``format`` to :sip:ref:`~PyQt6.QtCore.QDateTime.toString`. If the format is not specified, the format of :sip:ref:`~PyQt6.QtCore.Qt.DateFormat.ISODate` is used.                                                                                                                                                                                                                                                                                                              |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ``%{backtrace [depth=N] [separator="..."]}`` | A backtrace with the number of frames specified by the optional ``depth`` parameter (defaults to 5), and separated by the optional ``separator`` parameter (defaults to "|"). This expansion is available only on some platforms (currently only platfoms using glibc). Names are only known for exported functions. If you want to see the name of every function in your application, use ``QMAKE_LFLAGS += -rdynamic``. When reading backtraces, take into account that frames might be missing due to inlining or tail call optimization. |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

You can also use conditionals on the type of the message using ``%{if-debug}``, ``%{if-info}`` ``%{if-warning}``, ``%{if-critical}`` or ``%{if-fatal}`` followed by an ``%{endif}``. What is inside the ``%{if-\*}`` and ``%{endif}`` will only be printed if the type matches.

Finally, text inside ``%{if-category}`` ... ``%{endif}`` is only printed if the category is not the default one.

Example:

.. literalinclude:: ../../../snippets/qtbase-src-corelib-doc-snippets-code-src_corelib_global_qlogging.py
    :lines: 54-54

The default *pattern* is "%{if-category}%{category}: %{endif}%{message}".

The *pattern* can also be changed at runtime by setting the QT_MESSAGE_PATTERN environment variable; if both qSetMessagePattern() is called and QT_MESSAGE_PATTERN is set, the environment variable takes precedence.

**Note:** The information for the placeholders ``category``, ``file``, ``function`` and ``line`` is only recorded in debug builds. Alternatively, ``QT_MESSAGELOGCONTEXT`` can be defined explicitly. For more information refer to the :sip:ref:`~PyQt6.QtCore.QMessageLogContext` documentation.

**Note:** The message pattern only applies to unstructured logging, such as the default ``stderr`` output. Structured logging such as systemd will record the message as is, along with as much structured information as can be captured.

Custom message handlers can use :sip:ref:`~PyQt6.QtCore.qFormatLogMessage` to take *pattern* into account.

.. seealso:: :sip:ref:`~PyQt6.QtCore.qInstallMessageHandler`, :sip:ref:`~PyQt6.QtCore.QLoggingCategory`, :sip:ref:`~PyQt6.QtCore.QMessageLogContext`.
