.. sip:class-description::
    :status: todo
    :brief: Allows one to obtain random values from a high-quality Random Number Generator
    :digest: 546afbc5af61801ede83b1d094489641

The :sip:ref:`~PyQt6.QtCore.QRandomGenerator` class allows one to obtain random values from a high-quality Random Number Generator.

:sip:ref:`~PyQt6.QtCore.QRandomGenerator` may be used to generate random values from a high-quality random number generator. Like the C++ random engines, :sip:ref:`~PyQt6.QtCore.QRandomGenerator` can be seeded with user-provided values through the constructor. When seeded, the sequence of numbers generated by this class is deterministic. That is to say, given the same seed data, :sip:ref:`~PyQt6.QtCore.QRandomGenerator` will generate the same sequence of numbers. But given different seeds, the results should be considerably different.

:sip:ref:`~PyQt6.QtCore.QRandomGenerator.securelySeeded` can be used to create a :sip:ref:`~PyQt6.QtCore.QRandomGenerator` that is securely seeded with :sip:ref:`~PyQt6.QtCore.QRandomGenerator.system`, meaning that the sequence of numbers it generates cannot be easily predicted. Additionally, :sip:ref:`~PyQt6.QtCore.QRandomGenerator.global_` returns a global instance of :sip:ref:`~PyQt6.QtCore.QRandomGenerator` that Qt will ensure to be securely seeded. This object is thread-safe, may be shared for most uses, and is always seeded from :sip:ref:`~PyQt6.QtCore.QRandomGenerator.system`

:sip:ref:`~PyQt6.QtCore.QRandomGenerator.system` may be used to access the system's cryptographically-safe random generator. On Unix systems, it's equivalent to reading from ``/dev/urandom`` or the ``getrandom()`` or ``getentropy()`` system calls.

The class can generate 32-bit or 64-bit quantities, or fill an array of those. The most common way of generating new values is to call the :sip:ref:`~PyQt6.QtCore.QRandomGenerator.generate`, :sip:ref:`~PyQt6.QtCore.QRandomGenerator.generate64` or fillRange() functions. One would use it as:

.. literalinclude:: ../../../snippets/qtbase-src-corelib-doc-snippets-code-src_corelib_global_qrandom.py
    :lines: 55-55

Additionally, it provides a floating-point function :sip:ref:`~PyQt6.QtCore.QRandomGenerator.generateDouble` that returns a number in the range [0, 1) (that is, inclusive of zero and exclusive of 1). There's also a set of convenience functions that facilitate obtaining a random number in a bounded, integral range.

.. _qrandomgenerator-seeding-and-determinism:

Seeding and determinism
-----------------------

:sip:ref:`~PyQt6.QtCore.QRandomGenerator` may be seeded with specific seed data. When that is done, the numbers generated by the object will always be the same, as in the following example:

.. literalinclude:: ../../../snippets/qtbase-src-corelib-doc-snippets-code-src_corelib_global_qrandom.py
    :lines: 59-61

The seed data takes the form of one or more 32-bit words. The ideal seed size is approximately equal to the size of the :sip:ref:`~PyQt6.QtCore.QRandomGenerator` class itself. Due to mixing of the seed data, :sip:ref:`~PyQt6.QtCore.QRandomGenerator` cannot guarantee that distinct seeds will produce different sequences.

:sip:ref:`~PyQt6.QtCore.QRandomGenerator.global_`, like all generators created by :sip:ref:`~PyQt6.QtCore.QRandomGenerator.securelySeeded`, is always seeded from :sip:ref:`~PyQt6.QtCore.QRandomGenerator.system`, so it's not possible to make it produce identical sequences.

.. _qrandomgenerator-bulk-data:

Bulk data
---------

When operating in deterministic mode, :sip:ref:`~PyQt6.QtCore.QRandomGenerator` may be used for bulk data generation. In fact, applications that do not need cryptographically-secure or true random data are advised to use a regular :sip:ref:`~PyQt6.QtCore.QRandomGenerator` instead of :sip:ref:`~PyQt6.QtCore.QRandomGenerator.system` for their random data needs.

For ease of use, :sip:ref:`~PyQt6.QtCore.QRandomGenerator` provides a global object that can be easily used, as in the following example:

.. literalinclude:: ../../../snippets/qtbase-src-corelib-doc-snippets-code-src_corelib_global_qrandom.py
    :lines: 65-68

.. _qrandomgenerator-system-wide-random-number-generator:

System-wide random number generator
-----------------------------------

:sip:ref:`~PyQt6.QtCore.QRandomGenerator.system` may be used to access the system-wide random number generator, which is cryptographically-safe on all systems that Qt runs on. This function will use hardware facilities to generate random numbers where available. On such systems, those facilities are true Random Number Generators. However, if they are true RNGs, those facilities have finite entropy sources and thus may fail to produce any results if their entropy pool is exhausted.

If that happens, first the operating system then :sip:ref:`~PyQt6.QtCore.QRandomGenerator` will fall back to Pseudo Random Number Generators of decreasing qualities (Qt's fallback generator being the simplest). Whether those generators are still of cryptographic quality is implementation-defined. Therefore, :sip:ref:`~PyQt6.QtCore.QRandomGenerator.system` should not be used for high-frequency random number generation, lest the entropy pool become empty. As a rule of thumb, this class should not be called upon to generate more than a kilobyte per second of random data (note: this may vary from system to system).

If an application needs true RNG data in bulk, it should use the operating system facilities (such as ``/dev/random`` on Linux) directly and wait for entropy to become available. If the application requires PRNG engines of cryptographic quality but not of true randomness, :sip:ref:`~PyQt6.QtCore.QRandomGenerator.system` may still be used (see section below).

If neither a true RNG nor a cryptographically secure PRNG are required, applications should instead use PRNG engines like :sip:ref:`~PyQt6.QtCore.QRandomGenerator`'s deterministic mode and those from the C++ Standard Library. :sip:ref:`~PyQt6.QtCore.QRandomGenerator.system` can be used to seed those.

.. _qrandomgenerator-fallback-quality:

Fallback quality
................

:sip:ref:`~PyQt6.QtCore.QRandomGenerator.system` uses the operating system facilities to obtain random numbers, which attempt to collect real entropy from the surrounding environment to produce true random numbers. However, it's possible that the entropy pool becomes exhausted, in which case the operating system will fall back to a pseudo-random engine for a time. Under no circumstances will :sip:ref:`~PyQt6.QtCore.QRandomGenerator.system` block, waiting for more entropy to be collected.

The following operating systems guarantee that the results from their random-generation API will be of at least cryptographically-safe quality, even if the entropy pool is exhausted: Apple OSes (Darwin), BSDs, Linux, Windows. Barring a system installation problem (such as ``/dev/urandom`` not being readable by the current process), :sip:ref:`~PyQt6.QtCore.QRandomGenerator.system` will therefore have the same guarantees.

On other operating systems, :sip:ref:`~PyQt6.QtCore.QRandomGenerator` will fall back to a PRNG of good numeric distribution, but it cannot guarantee proper seeding in all cases. Please consult the OS documentation for more information.

Applications that require :sip:ref:`~PyQt6.QtCore.QRandomGenerator` not to fall back to non-cryptographic quality generators are advised to check their operating system documentation or restrict their deployment to one of the above.

.. _qrandomgenerator-reentrancy-and-thread-safety:

Reentrancy and thread-safety
----------------------------

:sip:ref:`~PyQt6.QtCore.QRandomGenerator` is reentrant, meaning that multiple threads can operate on this class at the same time, so long as they operate on different objects. If multiple threads need to share one PRNG sequence, external locking by a mutex is required.

The exceptions are the objects returned by :sip:ref:`~PyQt6.QtCore.QRandomGenerator.global_` and :sip:ref:`~PyQt6.QtCore.QRandomGenerator.system`: those objects are thread-safe and may be used by any thread without external locking. Note that thread-safety does not extend to copying those objects: they should always be used by reference.

.. _qrandomgenerator-standard-c-library-compatibility:

Standard C++ Library compatibility
----------------------------------

:sip:ref:`~PyQt6.QtCore.QRandomGenerator` is modeled after the requirements for random number engines in the C++ Standard Library and may be used in almost all contexts that the Standard Library engines can. Exceptions to the requirements are the following:

* :sip:ref:`~PyQt6.QtCore.QRandomGenerator` does not support seeding from another seed sequence-like class besides std::seed_seq itself;

* :sip:ref:`~PyQt6.QtCore.QRandomGenerator` is not comparable (but is copyable) or streamable to ``std::ostream`` or from ``std::istream``.

:sip:ref:`~PyQt6.QtCore.QRandomGenerator` is also compatible with the uniform distribution classes ``std::uniform_int_distribution`` and ``std:uniform_real_distribution``, as well as the free function ``std::generate_canonical``. For example, the following code may be used to generate a floating-point number in the range [1, 2.5):

.. literalinclude:: ../../../snippets/qtbase-src-corelib-doc-snippets-code-src_corelib_global_qrandom.py
    :lines: 72-73

.. seealso:: QRandomGenerator64.
